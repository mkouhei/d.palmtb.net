バージョン違いによるレプリケーションまとめ。
############################################


バージョンの異なるCouchDB同士でのレプリケーションは基本的にはやるべきではないのだが、とは言っても実際のところどのケースがうまく行って、どのケースがうまく行かないのか気になったので調べてまとめてみた。対象は0.11.0, 1.0.1, 1.0-androidと、1.0.1のCouchOneの環境。

レプリケーション実行レプリケーション元レプリケーション先データ内容成否
0.11.01.0.10.11.0ドキュメントのみOK
0.11.01.0.10.11.0デザインドキュメント含むOK
0.11.00.11.01.0.1ドキュメントのみOK
0.11.00.11.01.0.1デザインドキュメント含むOKは返るがデザインドキュメントはレプリケーション不可
レプリケーション実行レプリケーション元レプリケーション先データ内容成否
1.0.11.0.10.11.0ドキュメントのみOK但し、レスポンスすぐ返らない
1.0.11.0.10.11.0デザインドキュメント含むNG
1.0.10.11.01.0.1ドキュメントのみNG。エラーになるがドキュメントのレスポンスはできる
1.0.10.11.01.0.1デザインドキュメント含むNG。デザインドキュメントは失敗する
レプリケーション実行レプリケーション元レプリケーション先データ内容成否
1.0.11.0.11.0.1ドキュメントのみOK
1.0.11.0.11.0.1デザインドキュメント含むOK
レプリケーション実行レプリケーション元レプリケーション先データ内容成否
1.0-android0.11.01.0-androidドキュメントのみNG
1.0-android0.11.01.0-androidデザインドキュメント含むNG
1.0-android1.0-android0.11.0ドキュメントのみNG
1.0-android1.0-android0.11.0デザインドキュメント含むNG
レプリケーション実行レプリケーション元レプリケーション先データ内容成否
0.11.00.11.01.0-androidドキュメントのみOK
0.11.00.11.01.0-androidデザインドキュメント含むOK
0.11.01.0-android0.11.0ドキュメントのみOK
0.11.01.0-android0.11.0デザインドキュメント含むOK
レプリケーション実行レプリケーション元レプリケーション先データ内容成否
0.11.00.11.0CouchOneドキュメントのみOK
0.11.00.11.0CouchOneデザインドキュメント含むOK
0.11.0CouchOne0.11.0ドキュメントのみOK
0.11.0CouchOne0.11.0デザインドキュメント含むOK
レプリケーション実行レプリケーション元レプリケーション先データ内容成否
1.0-androidCouchOne1.0-androidドキュメントのみNG。Replication failed: could not open ...が返る
1.0-androidCouchOne1.0-androidデザインドキュメント含むNG
1.0-android1.0-androidCouchOneドキュメントのみNG
1.0-android1.0-androidCouchOneデザインドキュメント含むNG
レプリケーション実行レプリケーション元レプリケーション先データ内容成否
1.0.11.0.11.0-androidドキュメントのみOK
1.0.11.0.11.0-androidデザインドキュメント含むOK
1.0.11.0-android1.0.1ドキュメントのみOK
1.0.11.0-android1.0.1デザインドキュメント含むOK
レプリケーション実行レプリケーション元レプリケーション先データ内容成否
1.0-android1.0.11.0-androidドキュメントのみOK
1.0-android1.0.11.0-androidデザインドキュメント含むOK
1.0-android1.0-android1.0.1ドキュメントのみOK
1.0-android1.0-android1.0.1デザインドキュメント含むOK


追記 CouchDB 1.0.1と1.0.2間でのレプリケーション
**********************************************************************************************************************


これはCouchDB 1.0.1同士でやったときと同様、すべてうまく行った。



.. author:: mkouhei
.. categories:: CouchDB, 
.. tags::


