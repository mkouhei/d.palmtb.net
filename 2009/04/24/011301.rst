Debug Hacks Conference 2009に行ってきた。
####################################################################


ネタは吉田＠小江戸さんとYuguiさんのがおもしろかった。他の方のネタもCは最近読む程度で、書かないので久しぶりに書いてみようと思うきっかけとして刺激になった。終わったあとに、Debian関係の面々で中華料理屋で夕食。仮想化やリアルタイムOS談義で沸いた。
参加者としての宿題となったDebugネタは、高等なテクニックは持ち合わせてないので、非常に原始的なやり方で解決した話をば。以前、ハウジングで預かっているお客様環境のAIXでJava アプリケーションサーバが突然落ちる不具合が、自分が担当する前から頻発していて、引き継いだ時は当初はJava coreもCoreも吐かず、ログにも手がかりになるようなものは一切なかった。で、最初に行ったのは、AIXのAPAR情報を精査して、怪しいバグを当たりをつけて、APAR fixを適用してJava coreを吐くようになった [#]_ 。次に、Java coreを吐くようになったものの、それには特に原因となるような手がかりはなく、ファイルサイズとセキュリティ上の理由から自社の環境には持ってくることはできなかったので、お客様にIBMのFTPサイトに直接アップしていただいたものの、原因掴めず。fullcoreを吐かせるようにしたのち、そのfullcoreを同様にアップロードしていただいたのだが、IBMからの回答は遅いので、自力でデバッグすることにした。ただ、これがひどいことに、デバッガが無いので、1GB以上もあるfullcoreをstringsコマンドでmoreで眺めること1時間かけて、SAP JCoの呼び出し前後でエラー吐いていることを見つけて、IBMに問い合わせをしたのだが、すぐに回答葉なく、回答が出てもIBM側の対象範囲外という回答で問い合わせを打ちきられてしまった。しかたがないので、同じ情報を元に、今度はSAPに問い合わせしたところ、担当は中国人で、困ったことに、「日本語の意味が分かりません」というそこから説明するのかよ、という状況にハマった。何度かやりとりした結果、利用している環境はもともとサポート対象外だったのだが、これをSAP側のバグであることと、AIXでもサポートすることを認めさせた、という、力業でゴリ押しして、ベンダーに対する交渉で問題解決したというお話でした。Debugというには原始的スグル。


.. rubric:: footnote

.. [#] ：正確に言うと、ulimitなどの設定が不適切でAPAR fixを適用した直後も正常に吐かなかったのだけど。



.. author:: mkouhei
.. categories:: meeting, 
.. tags::


----

Comment:

	気を悪くしたら申し訳ないのですが、気になったので少しコメントします。 デバッガが無いのでdbx(bos.adt.debug)ではダメですか？また、Javaレベルのcore analyzerはjdmpviewと言うものが標準で付いています。それと、coredumpにstringsかけて見つけたようなメッセージ、しかもSAPのエラーをIBMに問い合わせるのは論理性がないように思ってしまいました。

	written by  某AIX技術者
	04/24/2009 22:23:59
	

----

Comment:

	コメントありがとうございます。恥ずかしながらjdmpviewというのは頂いたコメントで初めて知りました。dbxは確かインストールされていなかったと思います。IBMに問合せの下りは、仰る通りです。当時、回りに頼る人がなく、自分もAIXをほとんど触ったことが無い状態で、藁でも掴むように対応してたので。最初はSAPへのだの、言い訳にしかならないかと思いますが。

	written by  mkouhei
	04/24/2009 22:59:17
	http://d.hatena.ne.jp/mkouhei/

